(this.webpackJsonpuntitled=this.webpackJsonpuntitled||[]).push([[0],{113:function(e,t,n){e.exports={wrapper:"ingredient-details-page_wrapper__35Qhz"}},114:function(e,t,n){e.exports={main:"app_main__3yfFw"}},116:function(e,t,n){e.exports={overlay:"modal-overlay_overlay__AKixE"}},117:function(e,t,n){e.exports={main:"profile-page_main__1Y1TK"}},118:function(e,t,n){e.exports={wrapper:"order-details-page_wrapper__396Vm"}},12:function(e,t,n){e.exports={container:"burger-constructor_container__332QY",top:"burger-constructor_top__3B8eW",bottom:"burger-constructor_bottom__1l2yp",constructor:"burger-constructor_constructor__2Wifa",wrapper:"burger-constructor_wrapper__3y1z5",order:"burger-constructor_order__z_yls",icon:"burger-constructor_icon__2zlHT",overingredient:"burger-constructor_overingredient__3CwTp",overbun:"burger-constructor_overbun__bZSGO"}},126:function(e,t,n){},13:function(e,t,n){e.exports={header:"app-header_header__1iHLW","flex-wrapper":"app-header_flex-wrapper__175mI","flex-container":"app-header_flex-container__18DVr",link:"app-header_link__2y8TU",active:"app-header_active__1gFZ7",iconWrapper:"app-header_iconWrapper__3pMIP","flex-nav-link":"app-header_flex-nav-link__1ANsf"}},20:function(e,t,n){e.exports={wrapper:"account-navigation_wrapper__1Z1Aq",link:"account-navigation_link__3jOxT",active:"account-navigation_active__dzHJ2",text:"account-navigation_text__1cL40"}},213:function(e,t,n){"use strict";n.r(t);var r,a,c=n(1),i=n.n(c),s=n(34),o=n.n(s),d=(n(126),n(10)),l=n(2),u=n(120),p=n(45),j=p.c,m=function(){return Object(p.b)()},b=n(0),x=["children"],g=function(e){var t=e.children,n=Object(u.a)(e,x),r=j((function(e){return e})).userData;return Object(b.jsx)(d.b,Object(l.a)(Object(l.a)({},n),{},{render:function(e){var n=e.location;return""!==r.user.name&&""!==r.user.email?t:Object(b.jsx)(d.a,{to:{pathname:"/login",state:{from:n}}})}}))},f=n(113),_=n.n(f),O=n(6),h=n(24),v=n.n(h),y=function(){var e=j((function(e){return e})).burgerDataState,t=Object(c.useState)(void 0),n=Object(O.a)(t,2),r=n[0],a=n[1],s=Object(d.i)();return i.a.useEffect((function(){var t=e.burgerData.find((function(e){return e._id===s.id}));a(t)}),[e,s.id]),Object(b.jsxs)("div",{className:v.a.container,children:[Object(b.jsx)("h1",{className:"pt-3 text text_type_main-large ".concat(v.a.heading),children:"\u0414\u0435\u0442\u0430\u043b\u0438 \u0438\u043d\u0433\u0440\u0435\u0434\u0438\u0435\u043d\u0442\u0430"}),r&&Object(b.jsxs)(i.a.Fragment,{children:[Object(b.jsx)("img",{src:r.image_large,alt:r.name}),Object(b.jsx)("p",{className:"text text_type_main-medium",children:r.name}),Object(b.jsxs)("ul",{className:v.a.wrapper,children:[Object(b.jsxs)("li",{className:v.a.properties,children:[Object(b.jsx)("p",{className:"text text_type_main-default text_color_inactive",children:"\u041a\u0430\u043b\u043e\u0440\u0438\u0438, \u043a\u043a\u0430\u043b"}),Object(b.jsx)("p",{className:"mt-2 text text_type_digits-default text_color_inactive",children:r.calories})]}),Object(b.jsxs)("li",{className:v.a.properties,children:[Object(b.jsx)("p",{className:"text text_type_main-default text_color_inactive",children:"\u0411\u0435\u043b\u043a\u0438, \u0433"}),Object(b.jsx)("p",{className:"mt-2 text text_type_digits-default text_color_inactive",children:r.proteins})]}),Object(b.jsxs)("li",{className:v.a.properties,children:[Object(b.jsx)("p",{className:"text text_type_main-default text_color_inactive",children:"\u0416\u0438\u0440\u044b, \u0433"}),Object(b.jsx)("p",{className:"mt-2 text text_type_digits-default text_color_inactive",children:r.fat})]}),Object(b.jsxs)("li",{className:v.a.properties,children:[Object(b.jsx)("p",{className:"text text_type_main-default text_color_inactive",children:"\u0423\u0433\u043b\u0435\u0432\u043e\u0434\u044b, \u0433"}),Object(b.jsx)("p",{className:"mt-2 text text_type_digits-default text_color_inactive",children:r.carbohydrates})]})]})]},r._id)]})},N=function(){return Object(b.jsx)("div",{className:_.a.wrapper,children:Object(b.jsx)(y,{})})},w=n(114),C=n.n(w);function k(e){return e.ok?e.json():e.text().then((function(e){throw new Error("\u041e\u0448\u0438\u0431\u043a\u0430: ".concat(e))}))}!function(e){e.bun="\u0411\u0443\u043b\u043a\u0438",e.sauce="\u0421\u043e\u0443\u0441\u044b",e.main="\u041d\u0430\u0447\u0438\u043d\u043a\u0430"}(r||(r={})),function(e){e.done="done",e.created="created",e.pending="pending"}(a||(a={}));var S="https://norma.nomoreparties.space/api",I="wss://norma.nomoreparties.space";function T(e,t){return e.map((function(e){return t.find((function(t){return t._id===e}))}))}function D(e){return e.filter((function(e,t,n){return n.indexOf(e)===t}))}function M(e){var t=e,n=e.findIndex((function(e){return e&&"bun"===e.type}));return 0!==n?(t=e.splice(n,1)).concat(e):t}function E(e){return e.reduce((function(e,t){return e[t]?e[t]++:e[t]=1,e}),{})}var P=function(e,t){var n=0;return e&&(n=2*e.price),void 0!==t?t.reduce((function(e,t){return t?e+t.price:e}),0)+n:null},F=function(e){var t={bun:void 0,ingredients:[]};return t.bun=e.find((function(e){return e&&"bun"===e.type&&e}))||null,t.ingredients=e.filter((function(e){return e&&("main"===e.type||"sauce"===e.type)&&e})),t},W=function(e){var t,n=new Date(e),r=new Date(e),a=(r.setHours(0,0,0,0)-(new Date).setHours(0,0,0,0))/864e5;t=a<-3?r.toLocaleDateString("ru-RU"):new Intl.RelativeTimeFormat("ru",{numeric:"auto"}).format(a,"day");var c="".concat(t,", ").concat(n.getHours()>=10?n.getHours():"0"+n.getHours(),":").concat(n.getMinutes()>=10?n.getMinutes():"0"+n.getMinutes()," i-GMT").concat(n.getTimezoneOffset()<=0?"+"+n.getTimezoneOffset()/-60:"-"+n.getTimezoneOffset()/-60);return c.charAt(0).toUpperCase()+c.slice(1)};function B(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=(n=Object(l.a)({path:"/"},n)).expires;if("number"==typeof r&&r){var a=new Date;a.setTime(a.getTime()+1e3*r),r=n.expires=a}r&&r.toUTCString&&(n.expires=r.toUTCString()),null!==t&&(t=encodeURIComponent(t));var c=e+"="+t;for(var i in n){c+="; "+i;var s=n[i];!0!==s&&(c+="="+s)}document.cookie=c}function U(e){var t=document.cookie.match(new RegExp("(?:^|; )"+e.replace(/([\.$?*|{}\(\)\[\]\\\/\+^])/g,"\\$1")+"=([^;]*)"));return t?decodeURIComponent(t[1]):void 0}function L(e){B(e,null,{expires:-1})}var z=n(9),J=Object(z.b)({name:"burgerData",initialState:{isLoading:!1,hasError:!1,error:{},burgerData:[]},reducers:{getBurgerDataSuccess:function(e,t){return Object(l.a)(Object(l.a)({},e),{},{isLoading:!1,hasError:!1,burgerData:t.payload})},getBurgerData:function(e){return Object(l.a)(Object(l.a)({},e),{},{isLoading:!0,hasError:!1})},getBurgerDataFailed:function(e,t){return Object(l.a)(Object(l.a)({},e),{},{isLoading:!1,hasError:!0,error:t.payload})}}}),R=(J.reducer,J.actions),A=(R.getBurgerDataSuccess,R.getBurgerData,R.getBurgerDataFailed,Object(z.b)({name:"orderNumber",initialState:{order:[],orderNumber:null,isValidOrder:!0,isLoading:!1},reducers:{checkOrder:function(e,t){return t.payload?Object(l.a)(Object(l.a)({},e),{},{isValidOrder:!0}):Object(l.a)(Object(l.a)({},e),{},{isValidOrder:!1})},getOrderData:function(e){return Object(l.a)(Object(l.a)({},e),{},{isLoading:!0})},getOrderSuccess:function(e,t){return Object(l.a)(Object(l.a)({},e),{},{isLoading:!1,orderNumber:t.payload.orderNumber,order:t.payload.order})}}})),G=(A.reducer,A.actions),q=(G.checkOrder,G.getOrderData,G.getOrderSuccess,n(30)),H=Object(z.b)({name:"burgerConstructor",initialState:{bun:null,ingredients:[]},reducers:{addIngredientToOrder:function(e,t){if("bun"===t.payload.type)return Object(l.a)(Object(l.a)({},e),{},{bun:t.payload});var n=Object(q.a)(e.ingredients);return n.push({item:t.payload,uniqueId:Date.now().toString(36)+Math.random().toString(36).substr(2)}),Object(l.a)(Object(l.a)({},e),{},{ingredients:n})},deleteIngredientFromOrder:function(e,t){var n=Object(q.a)(e.ingredients),r=n.findIndex((function(e){return e.uniqueId===t.payload}));return r>-1?n.splice(r,1):console.log("Error: Can not find itemWithId: ".concat(t.payload)),Object(l.a)(Object(l.a)({},e),{},{ingredients:n})},setIngredientToDrag:function(e,t){var n=Object(q.a)(e.ingredients),r=e.ingredients[t.payload.dragIndex],a=e.ingredients[t.payload.hoverIndex];return n[t.payload.dragIndex]=a,n[t.payload.hoverIndex]=r,Object(l.a)(Object(l.a)({},e),{},{ingredients:n})},cleanOrder:function(){return{bun:null,ingredients:[]}}}}),V=(H.reducer,H.actions),Z=(V.addIngredientToOrder,V.deleteIngredientFromOrder,V.setIngredientToDrag,V.cleanOrder,Object(z.b)({name:"ingredientCounter",initialState:{selectedIngredients:[]},reducers:{counterIncrement:function(e,t){var n=Object(q.a)(e.selectedIngredients);return"bun"===t.payload.type&&(n=n.filter((function(e){return"bun"!==e.type}))),n.push(t.payload),Object(l.a)(Object(l.a)({},e),{},{selectedIngredients:n})},counterDecrement:function(e,t){var n=Object(q.a)(e.selectedIngredients),r=n.findIndex((function(e){return e._id===t.payload}));return r>-1?n.splice(r,1):console.log("Error: Can not find itemWithId: ".concat(t.payload)),Object(l.a)(Object(l.a)({},e),{},{selectedIngredients:n})},counterClean:function(){return{selectedIngredients:[]}}}})),X=(Z.reducer,Z.actions),K=(X.counterIncrement,X.counterDecrement,X.counterClean,J.actions),Y=A.actions,Q=H.actions,$=Z.actions,ee=Object(z.b)({name:"userData",initialState:{isUserLoading:!1,success:null,user:{email:"",name:""},accessToken:"",refreshToken:""},reducers:{getUserData:function(e){return Object(l.a)(Object(l.a)({},e),{},{isUserLoading:!0})},setUserData:function(e,t){return Object(l.a)(Object(l.a)({},e),{},{isUserLoading:!1,success:t.payload.success,user:Object(l.a)(Object(l.a)({},e.user),{},{name:t.payload.user.name,email:t.payload.user.email}),accessToken:t.payload.accessToken,refreshToken:t.payload.refreshToken})},setTokens:function(e,t){return Object(l.a)(Object(l.a)({},e),{},{success:t.payload.success,accessToken:t.payload.accessToken,refreshToken:t.payload.refreshToken})},refreshUserData:function(e,t){return Object(l.a)(Object(l.a)({},e),{},{isUserLoading:!1,success:t.payload.success,user:Object(l.a)(Object(l.a)({},e.user),{},{name:t.payload.user.name,email:t.payload.user.email})})},deleteUserData:function(e){return Object(l.a)(Object(l.a)({},e),{},{user:{email:"",name:""},accessToken:"",refreshToken:""})}}}),te=(ee.reducer,ee.actions),ne=(te.getUserData,te.setUserData,te.setTokens,te.refreshUserData,te.deleteUserData,ee.actions),re=function e(t,n){return function(r){return r(ne.getUserData()),fetch("".concat(S,"/auth/user"),{method:"GET",mode:"cors",cache:"no-cache",credentials:"same-origin",headers:{"Content-Type":"application/json",authorization:t||""},redirect:"follow",referrerPolicy:"no-referrer"}).then((function(e){return function(e){return e.ok?e.json():e.text().then((function(e){throw new Error(e)}))}(e)})).then((function(e){e.success&&r(ne.refreshUserData(e))})).catch((function(t){var a=JSON.parse(t.message);U("accessToken")&&"jwt expired"!==a.message?console.log(a):Promise.resolve(r(ae())).then((function(){if(n)return r(e(U("accessToken"),n-1))})).catch((function(e){return console.log(e)}))}))}},ae=function(){return function(e){return fetch("".concat(S,"/auth/token"),{method:"POST",mode:"cors",cache:"no-cache",credentials:"same-origin",headers:{"Content-Type":"application/json"},redirect:"follow",referrerPolicy:"no-referrer",body:JSON.stringify({token:U("refreshToken")})}).then((function(e){return k(e)})).then((function(t){t.success&&(B("accessToken",t.accessToken,{path:"/"}),B("refreshToken",t.refreshToken,{path:"/"}),e(ne.setTokens(t)))})).catch((function(e){console.log(e)}))}},ce=n(5),ie=n(13),se=n.n(ie),oe=n(4),de=Object(d.j)((function(){var e=j((function(e){return e})).userData,t=Object(d.g)(),n=Object(c.useMemo)((function(){return t.location.pathname}),[t.location]);return Object(b.jsxs)("header",{className:"pt-4 pb-4 ".concat(se.a.header),children:[Object(b.jsxs)("div",{className:se.a["flex-wrapper"],children:[Object(b.jsx)("div",{className:"p-5 ".concat(se.a["flex-container"]),children:Object(b.jsxs)(ce.c,{to:{pathname:"/"},exact:!0,className:"ml-2 text text_type_main-default ".concat(se.a.link),activeClassName:"ml-2 text text_type_main-default ".concat(se.a.link," ").concat(se.a.active),children:[Object(b.jsx)("div",{className:"mr-2",children:Object(b.jsx)(oe.BurgerIcon,{type:"/"===n?"primary":"secondary"})}),"\u041a\u043e\u043d\u0441\u0442\u0440\u0443\u043a\u0442\u043e\u0440"]})}),Object(b.jsxs)(ce.c,{to:{pathname:"/feed"},exact:!0,className:"ml-2 text text_type_main-default ".concat(se.a.link),activeClassName:"ml-2 text text_type_main-default ".concat(se.a.link," ").concat(se.a.active),children:[Object(b.jsx)("div",{className:"mr-2",children:Object(b.jsx)(oe.ListIcon,{type:"/feed"===n?"primary":"secondary"})}),"\u041b\u0435\u043d\u0442\u0430 \u0437\u0430\u043a\u0430\u0437\u043e\u0432"]}),Object(b.jsx)(ce.b,{to:"/",children:Object(b.jsx)(oe.Logo,{})})]}),Object(b.jsx)("div",{className:"p-5 ".concat(se.a["flex-container"]),children:Object(b.jsxs)(ce.c,{to:{pathname:"/profile"},className:"ml-2 text text_type_main-default ".concat(se.a.link),activeClassName:"ml-2 text text_type_main-default ".concat(se.a.link," ").concat(se.a.active),children:[Object(b.jsx)("div",{className:"mr-2",children:Object(b.jsx)(oe.ProfileIcon,{type:"/profile"===n||"/profile/logout"===n?"primary":"secondary"})}),Object(b.jsxs)("div",{className:"".concat(se.a["flex-nav-link"]),children:[Object(b.jsx)("p",{className:"text",children:"\u041b\u0438\u0447\u043d\u044b\u0439 \u043a\u0430\u0431\u0438\u043d\u0435\u0442"}),Object(b.jsx)("p",{className:"text text_type_digits-default",children:""===e.user.name?"Star guest":"".concat(e.user.name)})]})]})})]})})),le=n(218),ue=n(119),pe=n(35),je=n.n(pe),me=n(82),be=n.n(me),xe=n(219),ge=n(36),fe=n.n(ge),_e=Object(z.b)({name:"modalState",initialState:{modalsOpened:{},ingredientForModal:null},reducers:{setIngredientForModal:function(e,t){return Object(l.a)(Object(l.a)({},e),{},{ingredientForModal:t.payload})},handleModalOpen:function(e,t){return Object(l.a)(Object(l.a)({},e),{},{modalsOpened:t.payload})},handleModalClose:function(e){return Object(l.a)(Object(l.a)({},e),{},{modalsOpened:{}})}}}),Oe=(_e.reducer,_e.actions),he=(Oe.setIngredientForModal,Oe.handleModalOpen,Oe.handleModalClose,function(e){var t=j((function(e){return e})).ingredientCounter,n=m(),r=_e.actions,a=Object(xe.a)({type:"ingredient",item:e.ingredient,collect:function(e){return{isDragging:e.isDragging()}}}),c=Object(O.a)(a,2),i=c[0].isDragging,s=c[1];return Object(b.jsxs)("div",{ref:s,className:i?"".concat(fe.a.dragging," ").concat(fe.a.card):"".concat(fe.a.card),onClick:function(){n(r.setIngredientForModal(e.ingredient)),n(r.handleModalOpen({modalIngredientDetailsOpened:!0}))},draggable:!0,children:[t.selectedIngredients.includes(e.ingredient)&&Object(b.jsx)(oe.Counter,{count:"bun"===e.ingredient.type?t.selectedIngredients.reduce((function(t,n){return n===e.ingredient?t+2:t}),0):t.selectedIngredients.reduce((function(t,n){return n===e.ingredient?t+1:t}),0),size:"default"}),Object(b.jsx)("img",{src:e.image,alt:e.name,className:"pr-4 pl-4"}),Object(b.jsxs)("div",{className:"pt-1 pb-1 ".concat(fe.a.wrapper),children:[Object(b.jsx)("p",{className:"text text_type_digits-default pr-2",children:e.price}),Object(b.jsx)(oe.CurrencyIcon,{type:"primary"})]}),Object(b.jsx)("p",{className:"text text_type_main-default ".concat(fe.a.text),children:e.name})]})}),ve=i.a.forwardRef((function(e,t){var n=Object(d.h)();return Object(b.jsxs)("div",{ref:t,children:[Object(b.jsx)("h2",{className:"pt-10 text text_type_main-medium",children:e.groupName}),Object(b.jsx)("div",{className:be.a.grid,children:e.groupItems.map((function(e){return Object(b.jsx)(i.a.Fragment,{children:Object(b.jsx)(ce.b,{to:{pathname:"ingredient/".concat(e._id),state:{background:n}},className:"text text_type_main-medium ".concat(be.a.link),children:Object(b.jsx)(he,{ingredient:e,image:e.image,name:e.name,price:e.price},e._id)})},e._id)}))})]})})),ye=function(){var e=j((function(e){return e})).burgerDataState,t=i.a.useRef(null),n=i.a.useRef(null),a=i.a.useRef(null),c=i.a.useState("buns"),s=Object(O.a)(c,2),o=s[0],d=s[1],l=function(e){e&&e.scrollIntoView({behavior:"smooth",block:"start"})},u=i.a.useCallback((function(e){var n=e.currentTarget.getBoundingClientRect().top,r=function(e){if(null!==e.current)return e.current.getBoundingClientRect()},c=function(e){if(void 0!==e)return e.top-n/2<=n&&e.bottom-n/2>n},i=r(t),s=r(a);c(i)?d("sauces"):c(s)?d("filling"):d("buns")}),[]);return Object(b.jsx)(b.Fragment,{children:Object(b.jsxs)("div",{className:je.a.burgerIngredients,children:[Object(b.jsxs)("div",{className:"pt-5 ".concat(je.a.tab),children:[Object(b.jsx)(oe.Tab,{value:"buns",active:"buns"===o,onClick:function(e){d(e),l(n.current)},children:"\u0411\u0443\u043b\u043a\u0438"}),Object(b.jsx)(oe.Tab,{value:"sauces",active:"sauces"===o,onClick:function(e){d(e),l(t.current)},children:"\u0421\u043e\u0443\u0441\u044b"}),Object(b.jsx)(oe.Tab,{value:"filling",active:"filling"===o,onClick:function(e){d(e),l(a.current)},children:"\u041d\u0430\u0447\u0438\u043d\u043a\u0438"})]}),Object(b.jsxs)("div",{className:je.a.layout,onScroll:function(e){u(e)},children:[Object(b.jsx)(ve,{groupName:r.bun,groupItems:e.burgerData.filter((function(e){return"bun"===e.type})),ref:n}),Object(b.jsx)(ve,{groupName:r.sauce,groupItems:e.burgerData.filter((function(e){return"sauce"===e.type})),ref:t}),Object(b.jsx)(ve,{groupName:r.main,groupItems:e.burgerData.filter((function(e){return"main"===e.type})),ref:a})]})]})})},Ne=n(220),we=n(12),Ce=n.n(we),ke=n.p+"static/media/logo.81f3c4ef.svg",Se=n(84),Ie=n.n(Se),Te=function(e){var t=m(),n=H.actions,r=Z.actions,a=Object(c.useRef)(null),i=Object(xe.a)({type:"index",item:function(){return{index:e.index}},collect:function(e){return{isDragging:e.isDragging()}}}),s=Object(O.a)(i,2),o=s[0].isDragging,d=s[1],l=Object(Ne.a)({accept:"index",collect:function(e){return{isOver:e.isOver()}},hover:function(r,c){if(a.current){var i=r.index,s=e.index;if(i!==s){var o=a.current.getBoundingClientRect(),d=(o.bottom-o.top)/2,l=c.getClientOffset().y-o.top;i<s&&l<d||i>s&&l>d||(!function(e,r){t(n.setIngredientToDrag({dragIndex:e,hoverIndex:r}))}(i,s),r.index=s)}}}}),u=Object(O.a)(l,2),p=u[0].isOver;return d((0,u[1])(a)),Object(b.jsxs)("div",{ref:a,className:o?"".concat(Ce.a.wrapper," ").concat(Ie.a.dragging):p?"".concat(Ce.a.wrapper," ").concat(Ie.a.over):"".concat(Ce.a.wrapper),children:[Object(b.jsx)("div",{className:"mr-1",children:Object(b.jsx)(oe.DragIcon,{type:"primary"})}),Object(b.jsx)(oe.ConstructorElement,{text:e.itemWithId.item.name,price:e.itemWithId.item.price,thumbnail:e.itemWithId.item.image,handleClose:function(){t(n.deleteIngredientFromOrder(e.itemWithId.uniqueId)),t(r.counterDecrement(e.itemWithId.item._id))}})]})},De=Object(z.b)({name:"totalPrice",initialState:{totalSendingOrderPrice:null,totalFeedOrderPrice:null},reducers:{setTotalSendingOrderPrice:function(e,t){return Object(l.a)(Object(l.a)({},e),{},{totalSendingOrderPrice:t.payload})},setTotalFeedOrderPrice:function(e,t){return Object(l.a)(Object(l.a)({},e),{},{totalFeedOrderPrice:t.payload})}}}),Me=(De.reducer,De.actions),Ee=(Me.setTotalSendingOrderPrice,Me.setTotalFeedOrderPrice,function(){var e=j((function(e){return e})),t=e.burgerConstructorIngredients,n=e.totalPrice,r=e.userData,a=m(),c=H.actions,s=_e.actions,o=De.actions,l=Z.actions,u=Object(d.g)(),p=i.a.useCallback((function(){u.replace({pathname:"/login"})}),[u]),x=i.a.useCallback((function(){return P(t.bun,t.ingredients.map((function(e){return e.item})))}),[t.bun,t.ingredients]),g=Object(Ne.a)({accept:"ingredient",drop:function(e){a(c.addIngredientToOrder(e)),a(l.counterIncrement(e))},collect:function(e){return{isOver:e.isOver()}}}),f=Object(O.a)(g,2),_=f[0].isOver,h=f[1];return i.a.useEffect((function(){a(o.setTotalSendingOrderPrice(x()))}),[t,a,o,x]),Object(b.jsxs)("div",{ref:h,className:Ce.a.container,children:[Object(b.jsx)("div",{className:_?"".concat(Ce.a.top," ").concat(Ce.a.overbun):"".concat(Ce.a.top),children:t.bun?Array.of(t.bun).map((function(e){return Object(b.jsx)(oe.ConstructorElement,{type:"top",isLocked:!0,text:"".concat(e.name," (\u0432\u0435\u0440\u0445)"),price:e.price,thumbnail:e.image},"top:".concat(e._id))})):Object(b.jsx)(oe.ConstructorElement,{type:"top",isLocked:!0,text:"\u041f\u0435\u0440\u0435\u0442\u0430\u0449\u0438\u0442\u0435 \u0441\u044e\u0434\u0430 \u0431\u0443\u043b\u043a\u0443 \u0438\u0437 \u0441\u043f\u0438\u0441\u043a\u0430 \u0441\u043b\u0435\u0432\u0430 (\u0432\u0435\u0440\u0445)",price:0,thumbnail:ke})}),Object(b.jsx)("div",{className:_?"".concat(Ce.a.constructor," ").concat(Ce.a.overingredient):"".concat(Ce.a.constructor),children:t.ingredients&&t.ingredients.map((function(e,t){return Object(b.jsx)(Te,{itemWithId:e,index:t},e.uniqueId)}))}),Object(b.jsx)("div",{className:_?"".concat(Ce.a.bottom," ").concat(Ce.a.overbun):"".concat(Ce.a.bottom),children:t.bun?Array.of(t.bun).map((function(e){return Object(b.jsx)(oe.ConstructorElement,{type:"bottom",isLocked:!0,text:"".concat(e.name," (\u043d\u0438\u0437)"),price:e.price,thumbnail:e.image},"bottom:".concat(e._id))})):Object(b.jsx)(oe.ConstructorElement,{type:"bottom",isLocked:!0,text:"\u041f\u0435\u0440\u0435\u0442\u0430\u0449\u0438\u0442\u0435 \u0441\u044e\u0434\u0430 \u0431\u0443\u043b\u043a\u0443 \u0438\u0437 \u0441\u043f\u0438\u0441\u043a\u0430 \u0441\u043b\u0435\u0432\u0430 (\u043d\u0438\u0437)",price:0,thumbnail:ke})}),Object(b.jsxs)("div",{className:Ce.a.order,children:[Object(b.jsx)("h2",{className:"text text_type_digits-medium mr-2",children:n.totalSendingOrderPrice}),Object(b.jsx)("div",{className:Ce.a.icon,children:Object(b.jsx)(oe.CurrencyIcon,{type:"primary"})}),Object(b.jsx)("div",{className:"ml-10",children:Object(b.jsx)(oe.Button,{type:"primary",size:"large",onClick:function(){var e,n;p(),""!==r.user.name&&""!==r.user.email&&(a((e=function(){var e=t.ingredients.map((function(e){return e.item._id}));return t.bun&&e.unshift(t.bun._id),e}(),n=t,function(t){var r=U("accessToken"),a=!!n.bun;t(Y.checkOrder(a)),a&&(t(Y.getOrderData()),fetch("".concat(S,"/orders"),{method:"POST",headers:{"Content-Type":"application/json",authorization:r||""},body:JSON.stringify({ingredients:e})}).then((function(e){return k(e)})).then((function(n){t(Y.getOrderSuccess({orderNumber:n.order.number,order:e}))})).then((function(){t(Q.cleanOrder()),t($.counterClean())})).catch((function(e){console.log(e),t(K.getBurgerDataFailed({message:e.message}))})))})),a(s.handleModalOpen({modalOrderNumberDetailsOpened:!0})))},children:"\u041e\u0444\u043e\u0440\u043c\u0438\u0442\u044c \u0437\u0430\u043a\u0430\u0437"})})]})]})}),Pe=n(85),Fe=n.n(Pe),We=n(116),Be=n.n(We),Ue=function(e){return Object(b.jsx)("div",{className:Be.a.overlay,onClick:function(){e.handleOnClose()}})},Le=document.getElementById("modal"),ze=function(e){var t=i.a.useCallback((function(t){"Escape"===t.key&&e.handleOnClose()}),[e]);return i.a.useEffect((function(){return document.addEventListener("keydown",t),function(){document.removeEventListener("keydown",t)}}),[t]),null!==Le?o.a.createPortal(Object(b.jsxs)(b.Fragment,{children:[Object(b.jsx)(Ue,{handleOnClose:e.handleOnClose}),Object(b.jsxs)("div",{className:Fe.a.modal,onClick:function(e){e.stopPropagation()},children:[Object(b.jsx)("div",{className:Fe.a.cross,onClick:function(){e.handleOnClose()},children:Object(b.jsx)(oe.CloseIcon,{type:"primary"})}),e.children]})]}),Le):null},Je=n(25),Re=n.n(Je),Ae=function(){var e=j((function(e){return e})).orderState;return e.isLoading?Object(b.jsx)("div",{className:Re.a.wrapper,children:Object(b.jsx)("h2",{className:"mb-10 text text_type_main-large ".concat(Re.a.digits),children:"\u041e\u0442\u043f\u0440\u0430\u0432\u043b\u044f\u0435\u043c \u0437\u0430\u043a\u0430\u0437..."})}):e.isValidOrder&&!e.isLoading&&e.orderNumber?Object(b.jsxs)("div",{className:Re.a.wrapper,children:[Object(b.jsx)("h2",{className:"text text_type_digits-large ".concat(Re.a.digits),children:e.orderNumber}),Object(b.jsx)("p",{className:"mt-8 text text_type_main-default",children:"\u0438\u0434\u0435\u043d\u0442\u0438\u0444\u0438\u043a\u0430\u0442\u043e\u0440 \u0437\u0430\u043a\u0430\u0437\u0430"}),Object(b.jsx)("div",{className:Re.a.shadow,children:Object(b.jsx)(oe.CheckMarkIcon,{type:"primary"})}),Object(b.jsx)("p",{className:"text text_type_main-default",children:"\u0412\u0430\u0448 \u0437\u0430\u043a\u0430\u0437 \u043d\u0430\u0447\u0430\u043b\u0438 \u0433\u043e\u0442\u043e\u0432\u0438\u0442\u044c"}),Object(b.jsx)("p",{className:"mt-2 text text_type_main-default text_color_inactive",children:"\u0414\u043e\u0436\u0434\u0438\u0442\u0435\u0441\u044c \u0433\u043e\u0442\u043e\u0432\u043d\u043e\u0441\u0442\u0438 \u043d\u0430 \u043e\u0440\u0431\u0438\u0442\u0430\u043b\u044c\u043d\u043e\u0439 \u0441\u0442\u0430\u043d\u0446\u0438\u0438"})]}):Object(b.jsxs)("div",{className:Re.a.wrapper,children:[Object(b.jsx)("h2",{className:"mb-10 text text_type_digits-large ".concat(Re.a.digits),children:"X_X"}),Object(b.jsx)("p",{className:"text text_type_main-default",children:"\u0411\u0443\u0440\u0433\u0435\u0440 \u0431\u0435\u0437 \u0431\u0443\u043b\u043a\u0438 - \u044d\u0442\u043e \u0434\u0430\u0436\u0435 \u043d\u0435 \u043f\u0438\u0446\u0446\u0430!"}),Object(b.jsx)("p",{className:"mt-2 text text_type_main-default text_color_inactive",children:"\u041f\u043e\u0436\u0430\u043b\u0443\u0439\u0441\u0442\u0430, \u0432\u044b\u0431\u0435\u0440\u0438\u0442\u0435 \u043a\u0430\u043a\u0443\u044e-\u043d\u0438\u0431\u0443\u0434\u044c \u0431\u0443\u043b\u043a\u0443, \u0438 \u043c\u044b \u043f\u0440\u0438\u0433\u043e\u0442\u043e\u0432\u0438\u043c \u0431\u0443\u0440\u0433\u0435\u0440, \u0434\u0430\u0436\u0435 \u0435\u0441\u043b\u0438 \u0432 \u043d\u0435\u043c \u043d\u0435 \u0431\u0443\u0434\u0435\u0442 \u043d\u0438\u0447\u0435\u0433\u043e, \u043a\u0440\u043e\u043c\u0435 \u043d\u0435\u0435!"})]})},Ge=function(){var e=j((function(e){return e})),t=e.burgerDataState,n=e.modalState,r=m(),a=_e.actions;return Object(b.jsxs)(b.Fragment,{children:[Object(b.jsx)("h1",{className:"text text_type_main-large",children:"\u0421\u043e\u0431\u0435\u0440\u0438\u0442\u0435 \u0431\u0443\u0440\u0433\u0435\u0440"}),Object(b.jsxs)("div",{className:je.a.section,children:[Object(b.jsxs)(le.a,{backend:ue.a,children:[t&&Object(b.jsx)(ye,{}),Object(b.jsx)(Ee,{})]}),n.modalsOpened.modalOrderNumberDetailsOpened&&Object(b.jsx)(ze,{handleOnClose:function(){r(a.handleModalClose())},children:Object(b.jsx)(Ae,{})})]})]})},qe=n(31),He=n.n(qe),Ve=function(e){return Object(b.jsx)(oe.EmailInput,{onChange:e.onChange,size:void 0,value:e.value,name:"email"})},Ze=function(e){return Object(b.jsx)(oe.PasswordInput,{onChange:e.onChange,size:"default",value:e.value,name:"password"})},Xe=J.actions,Ke=ee.actions,Ye=function(){var e,t=j((function(e){return e})).userData,n=i.a.useState(""),r=Object(O.a)(n,2),a=r[0],c=r[1],s=i.a.useState(""),o=Object(O.a)(s,2),l=o[0],u=o[1],p=m(),x=Object(d.h)();return""!==t.user.name&&""!==t.user.email?Object(b.jsx)(d.a,{to:(null===(e=x.state)||void 0===e?void 0:e.from)||"/"}):Object(b.jsxs)("div",{children:[Object(b.jsxs)("form",{className:He.a.wrapper,onSubmit:function(e){e.preventDefault(),e.stopPropagation(),p(function(e,t){return function(n){return n(Ke.getUserData()),fetch("".concat(S,"/auth/login"),{method:"POST",mode:"cors",cache:"no-cache",credentials:"same-origin",headers:{"Content-Type":"application/json"},redirect:"follow",referrerPolicy:"no-referrer",body:JSON.stringify({email:e,password:t})}).then((function(e){return k(e)})).then((function(e){e.success&&(B("accessToken",e.accessToken),B("refreshToken",e.refreshToken),n(Ke.setUserData(e)))})).catch((function(e){console.log(e),n(Xe.getBurgerDataFailed({message:e.message}))}))}}(a,l))},children:[Object(b.jsx)("h2",{className:"text text_type_main-medium",children:"\u0412\u0445\u043e\u0434"}),Object(b.jsx)(Ve,{value:a,onChange:function(e){c(e.target.value)}}),Object(b.jsx)(Ze,{value:l,onChange:function(e){u(e.target.value)}}),Object(b.jsx)(oe.Button,{type:"primary",size:"medium",children:"\u0412\u043e\u0439\u0442\u0438"})]}),Object(b.jsxs)("div",{className:He.a.text,children:[Object(b.jsx)("div",{className:He.a.textWrapper,children:Object(b.jsxs)("p",{className:"text text_type_main-default text_color_inactive",children:["\u0412\u044b \u2014 \u043d\u043e\u0432\u044b\u0439 \u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u0435\u043b\u044c?",Object(b.jsx)(ce.b,{to:"/register",className:"ml-2 text text_type_main-default text_color_inactive ".concat(He.a.link),children:"\u0417\u0430\u0440\u0435\u0433\u0438\u0441\u0442\u0440\u0438\u0440\u043e\u0432\u0430\u0442\u044c\u0441\u044f"})]})}),Object(b.jsx)("div",{className:He.a.textWrapper,children:Object(b.jsxs)("p",{className:"mt-4 text text_type_main-default text_color_inactive",children:["\u0417\u0430\u0431\u044b\u043b\u0438 \u043f\u0430\u0440\u043e\u043b\u044c?",Object(b.jsx)(ce.b,{to:"/forgot-password",className:"ml-2 text text_type_main-default text_color_inactive ".concat(He.a.link),children:"\u0412\u043e\u0441\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c \u043f\u0430\u0440\u043e\u043b\u044c"})]})})]})]})},Qe=n(46),$e=n.n(Qe),et=function(e){var t=i.a.useState(e.icon),n=Object(O.a)(t,2),r=n[0],a=n[1],c=i.a.useState(e.type),s=Object(O.a)(c,2),o=s[0],d=s[1],l=i.a.useRef(null),u=function(e,t){var n={error:!1,errorMessage:""};switch(e){case"text":""!==t&&t.length<2&&(n.error=!0,n.errorMessage="\u042d\u0442\u043e \u043f\u043e\u043b\u0435 \u0434\u043e\u043b\u0436\u043d\u043e \u0441\u043e\u0434\u0435\u0440\u0436\u0430\u0442\u044c \u0445\u043e\u0442\u044f \u0431\u044b 2 \u0441\u0438\u043c\u0432\u043e\u043b\u0430");break;case"email":""===t||t.match(/^([\w.%+-]+)@([\w-]+\.)+([\w]{2,})$/i)||(n.error=!0,n.errorMessage="\u0423\u043a\u0430\u0436\u0438\u0442\u0435 \u043a\u043e\u0440\u0440\u0435\u043a\u0442\u043d\u044b\u0439 e-mail");break;case"password":""!==t&&t.length<6&&(n.error=!0,n.errorMessage="\u041f\u0430\u0440\u043e\u043b\u044c \u0434\u043e\u043b\u0436\u0435\u043d \u0441\u043e\u0441\u0442\u043e\u044f\u0442\u044c \u043d\u0435 \u043c\u0435\u043d\u0435\u0435 \u0447\u0435\u043c \u0438\u0437 6 \u0441\u0438\u043c\u0432\u043e\u043b\u043e\u0432");break;default:console.log("\u041d\u0435\u043e\u043f\u043e\u0437\u043d\u0430\u043d\u043d\u044b\u0439 \u0442\u0438\u043f \u043f\u043e\u043b\u044f \u0432\u0432\u043e\u0434\u0430")}return n}(o,e.value);return Object(b.jsx)(oe.Input,{type:o,placeholder:e.placeholder,onChange:e.onChange,value:e.value,name:"name",error:u.error,ref:l,icon:r,onIconClick:function(){setTimeout((function(){if(null!==l.current)return l.current.focus(),0})),"ShowIcon"===r?(a("HideIcon"),d("text")):"HideIcon"===r&&(a("ShowIcon"),d("password"))},errorText:u.errorMessage,size:"default"})},tt=function(){var e,t=j((function(e){return e})).userData,n=i.a.useState(""),r=Object(O.a)(n,2),a=r[0],c=r[1],s=i.a.useState(""),o=Object(O.a)(s,2),l=o[0],u=o[1],p=i.a.useState(""),x=Object(O.a)(p,2),g=x[0],f=x[1],_=m(),h=Object(d.h)();return""!==t.user.name&&""!==t.user.email?Object(b.jsx)(d.a,{to:(null===(e=h.state)||void 0===e?void 0:e.from)||"/"}):Object(b.jsxs)("div",{children:[Object(b.jsxs)("form",{className:$e.a.wrapper,onSubmit:function(e){e.preventDefault(),e.stopPropagation(),_(function(e,t,n){return function(r){r(Ke.getUserData()),fetch("".concat(S,"/auth/register"),{method:"POST",mode:"cors",cache:"no-cache",credentials:"same-origin",headers:{"Content-Type":"application/json"},redirect:"follow",referrerPolicy:"no-referrer",body:JSON.stringify({name:e,email:t,password:n})}).then((function(e){return k(e)})).then((function(e){e.success&&(B("accessToken",e.accessToken),B("refreshToken",e.refreshToken),r(Ke.setUserData(e)))})).catch((function(e){console.log(e),r(Xe.getBurgerDataFailed({message:e.message}))}))}}(a,l,g))},children:[Object(b.jsx)("h2",{className:"text text_type_main-medium",children:"\u0420\u0435\u0433\u0438\u0441\u0442\u0440\u0430\u0446\u0438\u044f"}),Object(b.jsx)(et,{placeholder:"\u0418\u043c\u044f",value:a,onChange:function(e){return c(e.target.value)},type:"text"}),Object(b.jsx)(Ve,{value:l,onChange:function(e){u(e.target.value)}}),Object(b.jsx)(Ze,{value:g,onChange:function(e){f(e.target.value)}}),Object(b.jsx)(oe.Button,{type:"primary",size:"medium",children:"\u0417\u0430\u0440\u0435\u0433\u0438\u0441\u0442\u0440\u0438\u0440\u043e\u0432\u0430\u0442\u044c\u0441\u044f"})]}),Object(b.jsx)("div",{className:$e.a.text,children:Object(b.jsx)("div",{className:$e.a.textWrapper,children:Object(b.jsxs)("p",{className:"text text_type_main-default text_color_inactive",children:["\u0423\u0436\u0435 \u0437\u0430\u0440\u0435\u0433\u0438\u0441\u0442\u0440\u0438\u0440\u043e\u0432\u0430\u043d\u044b?",Object(b.jsx)(ce.b,{to:"/login",className:"ml-2 text text_type_main-default text_color_inactive ".concat($e.a.link),children:"\u0412\u043e\u0439\u0442\u0438"})]})})})]})},nt=n(47),rt=n.n(nt),at=Object(z.b)({name:"forgotPassword",initialState:{emailWasSent:!1},reducers:{setEmailSentMarker:function(e){return Object(l.a)(Object(l.a)({},e),{},{emailWasSent:!0})},deleteEmailSentMarker:function(e){return Object(l.a)(Object(l.a)({},e),{},{emailWasSent:!1})}}}),ct=(at.reducer,at.actions),it=(ct.setEmailSentMarker,ct.deleteEmailSentMarker,at.actions),st=function(){var e,t=j((function(e){return e})).userData,n=i.a.useState(""),r=Object(O.a)(n,2),a=r[0],c=r[1],s=Object(d.g)(),o=i.a.useCallback((function(){s.replace({pathname:"/reset-password"})}),[s]),l=m(),u=Object(d.h)();return""!==t.user.name&&""!==t.user.email?Object(b.jsx)(d.a,{to:(null===(e=u.state)||void 0===e?void 0:e.from)||"/"}):Object(b.jsxs)("div",{children:[Object(b.jsxs)("form",{className:rt.a.wrapper,onSubmit:function(e){e.preventDefault(),e.stopPropagation(),""!==a&&l(function(e,t){return function(n){return fetch("".concat(S,"/password-reset"),{method:"POST",mode:"cors",cache:"no-cache",credentials:"same-origin",headers:{"Content-Type":"application/json"},redirect:"follow",referrerPolicy:"no-referrer",body:JSON.stringify({email:e})}).then((function(e){return k(e)})).then((function(e){e.success&&n(it.setEmailSentMarker())})).then((function(){t()})).catch((function(e){return console.log(e)}))}}(a,o))},children:[Object(b.jsx)("h2",{className:"text text_type_main-medium",children:"\u0412\u043e\u0441\u0441\u0442\u0430\u043d\u043e\u0432\u043b\u0435\u043d\u0438\u0435 \u043f\u0430\u0440\u043e\u043b\u044f"}),Object(b.jsx)(et,{placeholder:"\u0423\u043a\u0430\u0436\u0438\u0442\u0435 e-mail",value:a,onChange:function(e){return c(e.target.value)},type:"email"}),Object(b.jsx)(oe.Button,{type:"primary",size:"medium",children:"\u0412\u043e\u0441\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c"})]}),Object(b.jsx)("div",{className:rt.a.text,children:Object(b.jsx)("div",{className:rt.a.textWrapper,children:Object(b.jsxs)("p",{className:"text text_type_main-default text_color_inactive",children:["\u0412\u0441\u043f\u043e\u043c\u043d\u0438\u043b\u0438 \u043f\u0430\u0440\u043e\u043b\u044c?",Object(b.jsx)(ce.b,{to:"/login",className:"ml-2 text text_type_main-default text_color_inactive ".concat(rt.a.link),children:"\u0412\u043e\u0439\u0442\u0438"})]})})})]})},ot=n(48),dt=n.n(ot),lt=function(){var e,t=j((function(e){return e})),n=t.userData,r=t.forgotPasswordMarker,a=m(),c=i.a.useState(""),s=Object(O.a)(c,2),o=s[0],l=s[1],u=i.a.useState(""),p=Object(O.a)(u,2),x=p[0],g=p[1],f=Object(d.h)();return""!==n.user.name&&""!==n.user.email?Object(b.jsx)(d.a,{to:(null===(e=f.state)||void 0===e?void 0:e.from)||"/"}):!0!==r.emailWasSent?Object(b.jsx)(d.a,{to:{pathname:"/login"}}):Object(b.jsxs)("div",{children:[Object(b.jsxs)("form",{className:dt.a.wrapper,onSubmit:function(e){e.preventDefault(),e.stopPropagation(),a(function(e,t){return function(n){return fetch("".concat(S,"/password-reset/reset"),{method:"POST",mode:"cors",cache:"no-cache",credentials:"same-origin",headers:{"Content-Type":"application/json"},redirect:"follow",referrerPolicy:"no-referrer",body:JSON.stringify({password:e,token:t})}).then((function(e){return k(e)})).then((function(e){e.success&&n(it.deleteEmailSentMarker())})).catch((function(e){return console.log(e)}))}}(o,x))},children:[Object(b.jsx)("h2",{className:"text text_type_main-medium",children:"\u0412\u043e\u0441\u0441\u0442\u0430\u043d\u043e\u0432\u043b\u0435\u043d\u0438\u0435 \u043f\u0430\u0440\u043e\u043b\u044f"}),Object(b.jsx)(et,{placeholder:"\u0412\u0432\u0435\u0434\u0438\u0442\u0435 \u043d\u043e\u0432\u044b\u0439 \u043f\u0430\u0440\u043e\u043b\u044c",value:o,onChange:function(e){l(e.target.value)},icon:"ShowIcon",type:"password"}),Object(b.jsx)(et,{placeholder:"\u0412\u0432\u0435\u0434\u0438\u0442\u0435 \u043a\u043e\u0434 \u0438\u0437 \u043f\u0438\u0441\u044c\u043c\u0430",value:x,onChange:function(e){return g(e.target.value)},type:"text"}),Object(b.jsx)(oe.Button,{type:"primary",size:"medium",children:"\u0412\u043e\u0441\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c"})]}),Object(b.jsx)("div",{className:dt.a.text,children:Object(b.jsx)("div",{className:dt.a.textWrapper,children:Object(b.jsxs)("p",{className:"text text_type_main-default text_color_inactive",children:["\u0412\u0441\u043f\u043e\u043c\u043d\u0438\u043b\u0438 \u043f\u0430\u0440\u043e\u043b\u044c?",Object(b.jsx)(ce.b,{to:"/login",className:"ml-2 text text_type_main-default text_color_inactive ".concat(dt.a.link),children:"\u0412\u043e\u0439\u0442\u0438"})]})})})]})},ut=n(117),pt=n.n(ut),jt=n(20),mt=n.n(jt),bt=function(e){return Object(b.jsxs)("nav",{className:mt.a.wrapper,children:[Object(b.jsx)(ce.c,{to:"/profile",exact:!0,className:"text text_type_main-medium text_color_inactive ".concat(mt.a.link),activeClassName:"text text_type_main-medium text_color_inactive ".concat(mt.a.link," ").concat(mt.a.active),children:"\u041f\u0440\u043e\u0444\u0438\u043b\u044c"}),Object(b.jsx)(ce.c,{to:"/profile/orders",className:"text text_type_main-medium text_color_inactive ".concat(mt.a.link),activeClassName:"text text_type_main-medium text_color_inactive ".concat(mt.a.link," ").concat(mt.a.active),children:"\u0418\u0441\u0442\u043e\u0440\u0438\u044f \u0437\u0430\u043a\u0430\u0437\u043e\u0432"}),Object(b.jsx)(ce.c,{to:"/profile/logout",exact:!0,className:"text text_type_main-medium text_color_inactive ".concat(mt.a.link),activeClassName:"text text_type_main-medium text_color_inactive ".concat(mt.a.link," ").concat(mt.a.active),children:"\u0412\u044b\u0445\u043e\u0434"}),Object(b.jsx)("p",{className:"text text_type_main-small text_color_inactive ".concat(mt.a.text),children:e.text})]})},xt=function(e){return Object(b.jsxs)("div",{className:pt.a.main,children:[Object(b.jsx)(bt,{text:e.text}),e.children]})},gt=n(87),ft=n.n(gt),_t=function(){var e=j((function(e){return e})).userData,t=m(),n=i.a.useState(""),r=Object(O.a)(n,2),a=r[0],c=r[1],s=i.a.useState(""),o=Object(O.a)(s,2),d=o[0],l=o[1],u=i.a.useState(""),p=Object(O.a)(u,2),x=p[0],g=p[1];i.a.useEffect((function(){""!==e.user.name&&""!==e.user.email&&(c(e.user.name),l(e.user.email))}),[e.user]);var f=a!==e.user.name||d!==e.user.email||x;return Object(b.jsx)(b.Fragment,{children:Object(b.jsxs)("form",{className:ft.a.wrapper,onSubmit:function(e){e.preventDefault(),e.stopPropagation(),t(function(e,t,n,r){return function(a){return a(ne.getUserData()),fetch("".concat(S,"/auth/user"),{method:"PATCH",mode:"cors",cache:"no-cache",credentials:"same-origin",headers:{"Content-Type":"application/json",authorization:e||""},redirect:"follow",referrerPolicy:"no-referrer",body:JSON.stringify({name:t,email:n,password:r})}).then((function(e){return k(e)})).then((function(e){console.log(document.cookie),e.success&&a(ne.refreshUserData(e))})).catch((function(e){console.log(e)}))}}(U("accessToken"),a,d,x))},children:[Object(b.jsx)(et,{value:a,onChange:function(e){c(e.target.value)},type:"text",placeholder:"\u0418\u043c\u044f",icon:"EditIcon"}),Object(b.jsx)(et,{value:d,onChange:function(e){l(e.target.value)},type:"email",placeholder:"\u041b\u043e\u0433\u0438\u043d",icon:"EditIcon"}),Object(b.jsx)(et,{value:x,onChange:function(e){g(e.target.value)},type:"password",placeholder:"\u041f\u0430\u0440\u043e\u043b\u044c",icon:"EditIcon"}),f&&Object(b.jsxs)("div",{className:ft.a.buttons,children:[Object(b.jsx)(oe.Button,{type:"primary",size:"medium",children:"\u0421\u043e\u0445\u0440\u0430\u043d\u0438\u0442\u044c"}),Object(b.jsx)(oe.Button,{type:"secondary",size:"medium",onClick:function(){c(e.user.name),l(e.user.email)},children:"\u041e\u0442\u043c\u0435\u043d\u0430"})]})]})})},Ot=n(88),ht=n.n(Ot),vt=function(){var e=m();return Object(b.jsx)("div",{children:Object(b.jsxs)("div",{className:ht.a.wrapper,children:[Object(b.jsx)("h2",{className:"text text_type_main-medium",children:"\u0412\u044b\u0439\u0442\u0438 \u0438\u0437 \u043f\u0440\u043e\u0444\u0438\u043b\u044f?"}),Object(b.jsxs)("div",{className:ht.a.buttons,children:[Object(b.jsx)(oe.Button,{type:"secondary",size:"medium",onClick:function(){e((function(e){return fetch("".concat(S,"/auth/logout"),{method:"POST",mode:"cors",cache:"no-cache",credentials:"same-origin",headers:{"Content-Type":"application/json"},redirect:"follow",referrerPolicy:"no-referrer",body:JSON.stringify({token:U("refreshToken")})}).then((function(e){return k(e)})).then((function(){L("accessToken"),L("refreshToken"),e(Ke.deleteUserData())})).catch((function(e){return console.log(e)}))}))},children:"\u0414\u0430"}),Object(b.jsx)(oe.Button,{type:"primary",size:"medium",onClick:function(){window.history.back()},children:"\u041d\u0435\u0442"})]})]})})},yt=n.p+"static/media/404_shiba_inu.85129963.png",Nt=n(49),wt=n.n(Nt),Ct=function(){return Object(b.jsxs)("div",{className:wt.a.wrapper,children:[Object(b.jsx)("img",{className:wt.a.image,src:yt,alt:"\u0421\u043e\u0431\u0430\u043a\u0430 \u043d\u0435 \u043f\u043e\u043d\u0438\u043c\u0430\u0435\u0442, \u0433\u0434\u0435 \u0441\u0442\u0440\u0430\u043d\u0438\u0446\u0430"}),Object(b.jsxs)("h1",{className:"text text_type_main-large ".concat(wt.a.text),children:["\u0421\u0432\u044f\u0442\u044b\u0435 \u0431\u0443\u043b\u043e\u0447\u043a\u0438, ",Object(b.jsx)("br",{})," \u0441\u0442\u0440\u0430\u043d\u0438\u0446\u0430 \u043d\u0435 \u0441\u0443\u0449\u0435\u0441\u0442\u0432\u0443\u0435\u0442!!!"]}),Object(b.jsx)(ce.b,{to:"/",className:wt.a.link,children:"\u041f\u0435\u0440\u0435\u0439\u0442\u0438 \u0432 \u041a\u043e\u043d\u0441\u0442\u0440\u0443\u043a\u0442\u043e\u0440 \u0431\u0443\u0440\u0433\u0435\u0440\u043e\u0432"})]})},kt=n(37),St=n.n(kt),It=n(26),Tt=n.n(It),Dt=n(23),Mt=n.n(Dt),Et=function(e){return Object(b.jsx)("div",{className:Mt.a.roundDiv,children:Object(b.jsxs)("div",{className:Mt.a.moduleBorderWrap,children:[e.isSixth&&0===e.index?Object(b.jsxs)("div",{className:Mt.a.module,children:[Object(b.jsx)("p",{className:"text text_type_main-default ".concat(Mt.a.counter),children:"+".concat(e.restCount)}),Object(b.jsx)("div",{className:Mt.a.sixthIngredient,children:Object(b.jsx)("img",{className:Mt.a.image,src:e.image,alt:e.imageName})})]}):Object(b.jsx)("div",{className:Mt.a.module,children:Object(b.jsx)("img",{className:Mt.a.image,src:e.image,alt:e.imageName})}),e.ingredientCount&&e.ingredientCount>1&&Object(b.jsx)(oe.Counter,{count:e.ingredientCount,size:"small"})]})})},Pt=function(e){var t=j((function(e){return e})).burgerDataState,n=_e.actions,r=m(),a=M(T(e.order.ingredients,t.burgerData)),c=D(a),s=c.slice(0,6),o=0;c.length>6&&(o=c.length-6);var d=E(e.order.ingredients),l=i.a.useMemo((function(){var e=F(a);return P(e.bun,e.ingredients)}),[a]),u=W(e.order.createdAt);return Object(b.jsxs)("div",{className:Tt.a.wrapper,onClick:function(){r(n.setIngredientForModal(e.order)),r(n.handleModalOpen({modalOrderDetailsOpened:!0}))},children:[Object(b.jsxs)("div",{className:Tt.a.preview,children:[Object(b.jsx)("p",{className:"text text_type_digits-default",children:"#".concat(e.order.number)}),Object(b.jsx)("p",{className:"text text_type_main-default text_color_inactive",children:u})]}),Object(b.jsx)("h2",{className:"text text_type_main-medium ".concat(Tt.a.burgerName),children:e.order.name}),e.status&&("done"===e.order.status?Object(b.jsx)("p",{className:"mt-2 text text_type_main-default ".concat(Tt.a.textDone),children:"\u0412\u044b\u043f\u043e\u043b\u043d\u0435\u043d"}):"created"===e.order.status?Object(b.jsx)("p",{className:"mt-2 text text_type_main-default",children:"\u0421\u043e\u0437\u0434\u0430\u043d"}):Object(b.jsx)("p",{className:"mt-2 text text_type_main-default",children:"\u0413\u043e\u0442\u043e\u0432\u0438\u0442\u0441\u044f"})),Object(b.jsxs)("div",{className:Tt.a.ingredients,children:[Object(b.jsx)("div",{className:Tt.a.ingredientsWrapper,children:c.length<=6?c.reverse().map((function(e,t){return e&&e.name&&e.image&&Object(b.jsx)(Et,{image:e.image,imageName:e.name,isSixth:!1,ingredientCount:d[e._id]},t)})):s.reverse().map((function(e,t){return e&&e.name&&e.image&&Object(b.jsx)(Et,{image:e.image,imageName:e.name,isSixth:!0,index:t,restCount:o,ingredientCount:d[e._id]},t)}))}),Object(b.jsxs)("div",{className:Tt.a.price,children:[Object(b.jsx)("p",{className:"mr-2 text text_type_digits-default",children:l}),Object(b.jsx)(oe.CurrencyIcon,{type:"primary"})]})]})]})},Ft=n(89),Wt=n.n(Ft),Bt=n(50),Ut=n.n(Bt),Lt=function(e){return Object(b.jsxs)("div",{className:Ut.a.container,children:[Object(b.jsx)("p",{className:"text text_type_main-medium",children:e.listName}),Object(b.jsx)("div",{className:Ut.a.wrapper,children:Object(b.jsx)("div",{className:Ut.a.wrapperList,children:Object(b.jsx)("div",{className:Ut.a.list,children:e.children})})})]})},zt=n(90),Jt=n.n(zt),Rt=function(e){return Object(b.jsxs)("div",{className:Jt.a.wrapper,children:[Object(b.jsx)("h2",{className:"text text_type_main-medium",children:e.heading}),Object(b.jsx)("p",{className:"text text_type_digits-large ".concat(Jt.a.text),children:e.count})]})},At=function(){var e=j((function(e){return e})).ordersFeedState,t=e.total.toLocaleString("ru-RU"),n=e.totalToday.toLocaleString("ru-RU");return Object(b.jsxs)("div",{children:[Object(b.jsxs)("div",{className:Wt.a.wrapper,children:[Object(b.jsx)(Lt,{listName:"\u0413\u043e\u0442\u043e\u0432\u044b:",children:e.orders.map((function(e,t){return"done"===e.status&&Object(b.jsx)("p",{className:"mb-2 mr-2 text text_type_digits-default ".concat(Wt.a.textOrderDone),children:e.number},t)}))}),Object(b.jsx)(Lt,{listName:"\u0412 \u0440\u0430\u0431\u043e\u0442\u0435:",children:e.orders.map((function(e){return("created"===e.status||"pending"===e.status)&&Object(b.jsx)("p",{className:"mb-2 mr-2 text text_type_digits-default",children:e.number})}))})]}),Object(b.jsx)(Rt,{heading:"\u0412\u044b\u043f\u043e\u043b\u043d\u0435\u043d\u043e \u0437\u0430 \u0432\u0441\u0435 \u0432\u0440\u0435\u043c\u044f:",count:t}),Object(b.jsx)(Rt,{heading:"\u0412\u044b\u043f\u043e\u043b\u043d\u0435\u043d\u043e \u0437\u0430 \u0441\u0435\u0433\u043e\u0434\u043d\u044f:",count:n})]})},Gt=Object(z.b)({name:"orders",initialState:{isOrderFeedLoading:!1,success:!1,orders:[],total:0,totalToday:0,wsStartConnecting:!1,wsConnected:!1,hasError:!1,error:null},reducers:{wsInit:function(e){return Object(l.a)(Object(l.a)({},e),{},{wsStartConnecting:!0})},wsConnectionSuccess:function(e){return Object(l.a)(Object(l.a)({},e),{},{wsStartConnecting:!1,wsConnected:!0})},wsConnectionError:function(e,t){return Object(l.a)(Object(l.a)({},e),{},{wsConnected:!1,hasError:!0,error:t.payload})},wsGetMessage:function(e,t){return Object(l.a)(Object(l.a)({},e),{},{success:t.payload.success,orders:t.payload.orders,total:t.payload.total,totalToday:t.payload.totalToday})},wsSendMessage:function(e,t){return Object(l.a)({},e)},wsConnectionClosed:function(e){return Object(l.a)(Object(l.a)({},e),{},{wsConnected:!1})}}}),qt=(Gt.reducer,Gt.actions),Ht=qt.wsInit,Vt=qt.wsSendMessage,Zt=qt.wsConnectionSuccess,Xt=qt.wsConnectionError,Kt={wsInit:Ht,wsSendMessage:Vt,onOpen:Zt,onClose:qt.wsConnectionClosed,onError:Xt,onMessage:qt.wsGetMessage},Yt=function(){var e=j((function(e){return e})).ordersFeedState,t=Gt.actions,n=m();Object(c.useEffect)((function(){return n(t.wsInit()),function(){n(t.wsConnectionClosed())}}),[t,n]);var r=Object(d.h)();return Object(b.jsxs)(b.Fragment,{children:[Object(b.jsx)("h1",{className:"text text_type_main-large",children:"\u041b\u0435\u043d\u0442\u0430 \u0437\u0430\u043a\u0430\u0437\u043e\u0432"}),Object(b.jsxs)("div",{className:St.a.section,children:[Object(b.jsx)("div",{className:St.a.feed,children:e.orders.map((function(e,t){return Object(b.jsx)("div",{className:St.a.feedItem,children:Object(b.jsx)(ce.b,{to:{pathname:"feed/".concat(e._id),state:{background:r}},className:"text text_type_main-medium ".concat(St.a.link),children:Object(b.jsx)("div",{className:St.a.orderWrapper,children:Object(b.jsx)(Pt,{order:e,status:!1})})})},t)}))}),Object(b.jsx)(At,{})]})]})},Qt=n(118),$t=n.n(Qt),en=n(38),tn=n.n(en),nn=n(60),rn=n.n(nn),an=function(e){return Object(b.jsxs)("div",{className:rn.a.wrapper,children:[Object(b.jsxs)("div",{className:rn.a.part,children:[Object(b.jsx)(Et,{image:e.image,imageName:e.name}),Object(b.jsx)("p",{className:"ml-4 text text_type_main-default",children:e.name})]}),Object(b.jsxs)("div",{className:rn.a.part,children:[Object(b.jsx)("p",{className:"mr-2 ml-4 text text_type_digits-default",children:"bun"===e.type?"2 x ".concat(e.price):e.ingredientCount>1?"".concat(e.ingredientCount," x ").concat(e.price):"1 x ".concat(e.price)}),Object(b.jsx)(oe.CurrencyIcon,{type:"primary"})]})]})},cn=function(e){var t,n,r,a,s,o=j((function(e){return e})).burgerDataState,l=Object(c.useState)(void 0),u=Object(O.a)(l,2),p=u[0],m=u[1],x=Object(d.i)();if(i.a.useEffect((function(){var t=e.array.find((function(e){return e._id===x.id}));m(t)}),[x.id,e.array]),p){n=D(t=M(T(p.ingredients,o.burgerData))),r=E(p.ingredients);var g=F(t);a=P(g.bun,g.ingredients),s=W(p.createdAt)}return Object(b.jsx)("div",{className:tn.a.wrapper,children:p&&Object(b.jsxs)(b.Fragment,{children:[Object(b.jsx)("p",{className:"mb-10 text text_type_digits-default",children:"#".concat(p.number)}),Object(b.jsx)("h2",{className:"mb-3 text text_type_main-medium",children:p.name}),"done"===p.status?Object(b.jsx)("p",{className:"mb-15 text text_type_main-default ".concat(tn.a.textDone),children:"\u0412\u044b\u043f\u043e\u043b\u043d\u0435\u043d"}):"created"===p.status?Object(b.jsx)("p",{className:"mb-15 text text_type_main-default",children:"\u0421\u043e\u0437\u0434\u0430\u043d"}):Object(b.jsx)("p",{className:"mb-15 text text_type_main-default",children:"\u0412 \u0440\u0430\u0431\u043e\u0442\u0435"}),Object(b.jsx)("h3",{className:"mb-6 text text_type_main-medium",children:"\u0421\u043e\u0441\u0442\u0430\u0432:"}),Object(b.jsx)("div",{className:tn.a.list,children:n&&n.map((function(e,t){return e&&e.name&&e.image&&Object(b.jsx)(an,{image:e.image,name:e.name,type:e.type,price:e.price,ingredientCount:r[e._id]},t)}))}),Object(b.jsxs)("div",{className:tn.a.total,children:[Object(b.jsx)("p",{className:"text text_type_main-default text_color_inactive",children:s}),Object(b.jsxs)("div",{className:tn.a.count,children:[Object(b.jsx)("p",{className:"mr-2 text text_type_digits-default",children:a}),Object(b.jsx)(oe.CurrencyIcon,{type:"primary"})]})]})]})})},sn=function(e){var t=m();return Object(c.useEffect)((function(){return t(e.orderActions.wsInit()),function(){t(e.orderActions.onClose())}}),[t,e.orderActions]),Object(b.jsx)("div",{className:$t.a.wrapper,children:Object(b.jsx)(cn,{array:e.order})})},on=n(51),dn=n.n(on),ln=Object(z.b)({name:"userOrders",initialState:{isOrderFeedLoading:!1,success:!1,orders:[],total:0,totalToday:0,wsStartConnecting:!1,wsConnected:!1,hasError:!1,error:null},reducers:{wsInit:function(e){return Object(l.a)(Object(l.a)({},e),{},{wsStartConnecting:!0})},wsConnectionSuccess:function(e){return Object(l.a)(Object(l.a)({},e),{},{wsStartConnecting:!1,wsConnected:!0})},wsConnectionError:function(e,t){return Object(l.a)(Object(l.a)({},e),{},{wsConnected:!1,hasError:!0,error:t.payload})},wsGetMessage:function(e,t){return Object(l.a)(Object(l.a)({},e),{},{success:t.payload.success,orders:t.payload.orders,total:t.payload.total,totalToday:t.payload.totalToday})},wsSendMessage:function(e,t){return Object(l.a)({},e)},wsConnectionClosed:function(e){return Object(l.a)(Object(l.a)({},e),{},{wsConnected:!1})}}}),un=(ln.reducer,ln.actions),pn=un.wsInit,jn=un.wsSendMessage,mn=un.wsConnectionSuccess,bn=un.wsConnectionError,xn={wsInit:pn,wsSendMessage:jn,onOpen:mn,onClose:un.wsConnectionClosed,onError:bn,onMessage:un.wsGetMessage},gn=function(){var e=j((function(e){return e})).userOrdersFeedState,t=ln.actions,n=m();Object(c.useEffect)((function(){return n(t.wsInit()),function(){n(t.wsConnectionClosed())}}),[t,n]);var r=Object(d.h)();return Object(b.jsx)("div",{className:dn.a.wrapper,children:Object(b.jsx)("ul",{className:dn.a.feed,children:e.orders.map((function(e,t){return Object(b.jsx)("li",{className:dn.a.feedItem,children:Object(b.jsx)(ce.b,{to:{pathname:"orders/".concat(e._id),state:{background:r}},className:"text text_type_main-medium ".concat(dn.a.link),children:Object(b.jsx)(Pt,{order:e,status:!0})})},t)})).reverse()})})},fn=function(){var e=j((function(e){return e})),t=e.burgerDataState,n=e.ordersFeedState,r=e.userOrdersFeedState,a=m(),c=Object(d.g)(),s=Object(d.h)(),o=s.state&&s.state.background;return i.a.useEffect((function(){a((function(e){e(K.getBurgerData()),fetch("".concat(S,"/ingredients"),{method:"GET",headers:{"Content-Type":"application/json"}}).then((function(e){return k(e)})).then((function(t){e(K.getBurgerDataSuccess(t.data))})).catch((function(t){e(K.getBurgerDataFailed({message:t.message}))}))})),a(re(U("accessToken"),3)),o&&delete s.state.background}),[a,c]),t.hasError?Object(b.jsx)("h2",{className:"text text_type_main-default",children:t.error.message}):t.isLoading?Object(b.jsx)("div",{children:"\u0417\u0430\u0433\u0440\u0443\u0437\u043a\u0430..."}):Object(b.jsxs)("div",{className:C.a.main,children:[Object(b.jsx)(de,{}),Object(b.jsxs)("main",{className:"pt-10 pb-10",children:[Object(b.jsxs)(d.d,{location:o||s,children:[Object(b.jsx)(d.b,{path:"/login",exact:!0,children:Object(b.jsx)(Ye,{})}),Object(b.jsx)(d.b,{path:"/register",exact:!0,children:Object(b.jsx)(tt,{})}),Object(b.jsx)(d.b,{path:"/forgot-password",exact:!0,children:Object(b.jsx)(st,{})}),Object(b.jsx)(d.b,{path:"/reset-password",exact:!0,children:Object(b.jsx)(lt,{})}),Object(b.jsx)(d.b,{path:"/feed",exact:!0,children:Object(b.jsx)(Yt,{})}),Object(b.jsx)(d.b,{path:"/feed/:id",exact:!0,children:Object(b.jsx)(sn,{orderActions:Kt,order:n.orders})}),Object(b.jsx)(g,{path:"/profile",exact:!0,children:Object(b.jsx)(xt,{text:"\u0412 \u044d\u0442\u043e\u043c \u0440\u0430\u0437\u0434\u0435\u043b\u0435 \u0432\u044b \u043c\u043e\u0436\u0435\u0442\u0435 \u0438\u0437\u043c\u0435\u043d\u0438\u0442\u044c \u0441\u0432\u043e\u0438 \u043f\u0435\u0440\u0441\u043e\u043d\u0430\u043b\u044c\u043d\u044b\u0435 \u0434\u0430\u043d\u043d\u044b\u0435",children:Object(b.jsx)(_t,{})})}),Object(b.jsx)(g,{path:"/profile/orders",exact:!0,children:Object(b.jsx)(xt,{text:"\u0412 \u044d\u0442\u043e\u043c \u0440\u0430\u0437\u0434\u0435\u043b\u0435 \u0432\u044b \u043c\u043e\u0436\u0435\u0442\u0435 \u043f\u043e\u0441\u043c\u043e\u0442\u0440\u0435\u0442\u044c \u0441\u0432\u043e\u044e \u0438\u0441\u0442\u043e\u0440\u0438\u044e \u0437\u0430\u043a\u0430\u0437\u043e\u0432",children:Object(b.jsx)(gn,{})})}),Object(b.jsx)(g,{path:"/profile/orders/:id",exact:!0,children:r.orders!==[]&&Object(b.jsx)(sn,{orderActions:xn,order:r.orders})}),Object(b.jsx)(g,{path:"/profile/logout",exact:!0,children:Object(b.jsx)(xt,{text:"\u0412 \u044d\u0442\u043e\u043c \u0440\u0430\u0437\u0434\u0435\u043b\u0435 \u0432\u044b \u043c\u043e\u0436\u0435\u0442\u0435 \u0432\u044b\u0439\u0442\u0438 \u0438\u0437 \u0441\u0438\u0441\u0442\u0435\u043c\u044b",children:Object(b.jsx)(vt,{})})}),Object(b.jsx)(d.b,{path:"/ingredient/:id",children:Object(b.jsx)(N,{})}),Object(b.jsx)(d.b,{path:"/",exact:!0,children:Object(b.jsx)(Ge,{})}),Object(b.jsx)(d.b,{children:Object(b.jsx)(Ct,{})})]}),o&&Object(b.jsx)(d.b,{exact:!0,path:"/ingredient/:id",children:Object(b.jsx)(ze,{handleOnClose:function(){c.goBack()},children:Object(b.jsx)(y,{})})}),o&&Object(b.jsx)(d.b,{exact:!0,path:"/feed/:id",children:Object(b.jsx)(ze,{handleOnClose:function(){c.goBack()},children:Object(b.jsx)(cn,{array:n.orders})})}),o&&Object(b.jsx)(g,{exact:!0,path:"/profile/orders/:id",children:Object(b.jsx)(ze,{handleOnClose:function(){c.goBack()},children:Object(b.jsx)(cn,{array:r.orders})})})]})]})},_n=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,221)).then((function(t){var n=t.getCLS,r=t.getFID,a=t.getFCP,c=t.getLCP,i=t.getTTFB;n(e),r(e),a(e),c(e),i(e)}))},On=n(14),hn=Object(On.b)({burgerDataState:J.reducer,burgerConstructorIngredients:H.reducer,modalState:_e.reducer,orderState:A.reducer,totalPrice:De.reducer,ingredientCounter:Z.reducer,userData:ee.reducer,forgotPasswordMarker:at.reducer,ordersFeedState:Gt.reducer,userOrdersFeedState:ln.reducer}),vn=n(42),yn=function(e,t,n){return function(r){var a=null,c=!1;return function(i){return function(s){var o,d=s.payload,u=n?null===(o=U("accessToken"))||void 0===o?void 0:o.split(" ")[1]:null;if(!t.wsInit.match(s))return i(s);if(!a){if(a=u?new WebSocket("".concat(e,"?token=").concat(u)):new WebSocket("".concat(e)),c=!0,a.onopen=function(){a&&1===a.readyState&&r.dispatch(t.onOpen())},a.onerror=function(){r.dispatch(t.onError("Error"))},a.onmessage=function(e){var n=e.data,a=JSON.parse(n);r.dispatch(t.onMessage(a))},a.onclose=function(e){r.dispatch(t.onClose()),1e3!==e.code&&(r.dispatch(t.onError),console.log("Socket closed with code: ",e.code)),c&&setTimeout((function(){r.dispatch(t.wsInit())}),1e3)},t.wsSendMessage.match(s)){var p=u?Object(l.a)(Object(l.a)({},d),{},{accessToken:u}):Object(l.a)({},d);a.send(JSON.stringify(p))}i(s)}}}}},Nn=Object(z.a)({reducer:hn,middleware:[vn.a,yn("".concat(I,"/orders/all"),Kt,!1),yn("".concat(I,"/orders"),xn,!0)],devTools:!1});o.a.render(Object(b.jsx)(i.a.StrictMode,{children:Object(b.jsx)(p.a,{store:Nn,children:Object(b.jsx)(ce.a,{basename:"/react-burgerhouse",children:Object(b.jsx)(fn,{})})})}),document.getElementById("root")),_n()},23:function(e,t,n){e.exports={roundDiv:"ingredient-icon_roundDiv__1KLt9",moduleBorderWrap:"ingredient-icon_moduleBorderWrap__2KDnX",module:"ingredient-icon_module__1B7Kl",counter:"ingredient-icon_counter__1fhFh",sixthIngredient:"ingredient-icon_sixthIngredient__1v_-t",image:"ingredient-icon_image__2pXqP"}},24:function(e,t,n){e.exports={container:"ingredient-details_container__1-8YX",heading:"ingredient-details_heading__bGiiD",wrapper:"ingredient-details_wrapper__39_0t",properties:"ingredient-details_properties__dKlyo"}},25:function(e,t,n){e.exports={wrapper:"order-number-details_wrapper__3IrU4",digits:"order-number-details_digits__csJWk",shadow:"order-number-details_shadow__3Kjo_"}},26:function(e,t,n){e.exports={wrapper:"created-order_wrapper__6ZDwG",preview:"created-order_preview__30f8u",burgerName:"created-order_burgerName__3X9Ph",textDone:"created-order_textDone__19IhA",ingredients:"created-order_ingredients__uXYYc",ingredientsWrapper:"created-order_ingredientsWrapper__1trMK",price:"created-order_price__1SdTM"}},31:function(e,t,n){e.exports={wrapper:"authorisation-page_wrapper__wA-ob",text:"authorisation-page_text__1FDtz",textWrapper:"authorisation-page_textWrapper__2vQus",link:"authorisation-page_link__2ba2G"}},35:function(e,t,n){e.exports={section:"burger-ingredients_section__JPGCZ",tab:"burger-ingredients_tab__1Ru1Z",burgerIngredients:"burger-ingredients_burgerIngredients__2i6ZI",layout:"burger-ingredients_layout__13p8T"}},36:function(e,t,n){e.exports={card:"ingredient_card__1MAgk",wrapper:"ingredient_wrapper__Up6XU",text:"ingredient_text__MEq95",dragging:"ingredient_dragging__aJIiN"}},37:function(e,t,n){e.exports={section:"feed-page_section__PSpIJ",feed:"feed-page_feed__3ZSQi",feedItem:"feed-page_feedItem__2FOUc",link:"feed-page_link__3vecC",orderWrapper:"feed-page_orderWrapper___c1Ng"}},38:function(e,t,n){e.exports={wrapper:"order-details_wrapper__7rCGD",textDone:"order-details_textDone__1gZWN",list:"order-details_list__2oooj",total:"order-details_total__lo__l",count:"order-details_count__1TMXT"}},46:function(e,t,n){e.exports={wrapper:"register-page_wrapper__3J4qm",text:"register-page_text__wNyCJ",textWrapper:"register-page_textWrapper__TbiVu",link:"register-page_link__27Cgw"}},47:function(e,t,n){e.exports={wrapper:"forgot-password-page_wrapper__1yWSJ",text:"forgot-password-page_text__2UTVm",textWrapper:"forgot-password-page_textWrapper__1WEyq",link:"forgot-password-page_link__3Iqci"}},48:function(e,t,n){e.exports={wrapper:"reset-password-page_wrapper__GZj86",text:"reset-password-page_text__2ARrb",textWrapper:"reset-password-page_textWrapper__2_q9o",link:"reset-password-page_link__2hg3V"}},49:function(e,t,n){e.exports={wrapper:"not-found-404_wrapper__2cvOE",image:"not-found-404_image__1P4N5",text:"not-found-404_text__3pGcU",link:"not-found-404_link__2WdfQ"}},50:function(e,t,n){e.exports={container:"order-numbers-list_container__2nsqE",wrapper:"order-numbers-list_wrapper__3f4ka",wrapperList:"order-numbers-list_wrapperList__vKWA3",list:"order-numbers-list_list__2F2l0"}},51:function(e,t,n){e.exports={wrapper:"my-orders-page_wrapper__19Xvn",feed:"my-orders-page_feed__3lzFM",feedItem:"my-orders-page_feedItem__psqkt",link:"my-orders-page_link__32omB"}},60:function(e,t,n){e.exports={wrapper:"order-composition_wrapper__3liW6",part:"order-composition_part__CYY10"}},82:function(e,t,n){e.exports={grid:"ingredient-group_grid__14Z0a",link:"ingredient-group_link__3dSMM"}},84:function(e,t,n){e.exports={dragging:"constructor-element-draggable_dragging__16Qo6",over:"constructor-element-draggable_over__2B8UR"}},85:function(e,t,n){e.exports={modal:"modal_modal__1DF1f",cross:"modal_cross__3JYgg"}},87:function(e,t,n){e.exports={wrapper:"profile-details_wrapper__1kTjm",buttons:"profile-details_buttons__3akSl"}},88:function(e,t,n){e.exports={wrapper:"logout-page_wrapper__lmZLQ",buttons:"logout-page_buttons__37ToH"}},89:function(e,t,n){e.exports={wrapper:"order-statistics_wrapper__3jisV",textOrderDone:"order-statistics_textOrderDone__1Rh6x"}},90:function(e,t,n){e.exports={wrapper:"total-orders_wrapper__31GVd",text:"total-orders_text__37GMB"}}},[[213,1,2]]]);
//# sourceMappingURL=main.17dda629.chunk.js.map